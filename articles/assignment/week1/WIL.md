# RESTful API 학습하기

## REST 구성
1. 자원(resource) - url
2. 행위(verb) - http method
3. 표현

## REST 의 특징 (6가지)


+ Uniform(유니폼 인터페이스)  
: Uniform Interface는 URL로 지정된 리소스에 대한 조작을 통일되고 한정적인 인터페이스로 수행하는 아키텍쳐 스타일이다.

+ Stateless(무상태성)  
: REST는 무상태성을 갖는다
반대로 말하면 작업을 위한 상태정보를 따로 저장하고 관리하지 않는다  
API서버는 들어오는 요청만 잘 처리하면 된다.  
이때문서 서비스의 자유도가 높아지고 서버에서 불필요한 정보를 관리하지 않으므로 구현이 단순해진다


+ Cacheable(캐시가능)  
:REST의 가장 큰 특징 중 하나는 HTTP라는 기존 웹표준을 그대로 사용하기 때문에, 웹에서 사용하는 기존 인프라를 그대로 활용이 가능하다.
따라서 HTTP가 가진 캐싱 기능이 적용된다.
HTTP 프로토콜 표준에서 사용하는 Last-Modified 태그나 E-Tag를 이용하면 캐싱 구현이 가능함.

+ Self-descriptiveness (자체 표현 구조)  
: REST의 또 다른 큰 특징 중 하나는 REST API 메시지만 보고도 이를 쉽게 이해 할 수 있는 자체 표현 구조로 되어있다

+ Client - Server 구조  
: REST 서버는 API를 제공, 클라이언트는 사용자 인증이나 컨텍스트(세션, 로그인 정보)등을 직접 관리하는 구조로 각각의 역할이 확실히 구분되기 때문에 클라이언트와 서버에서 개발해야 할 내용이 명확해지고 서로간 의존성이 줄어든다

+ 계층형 구조  
: REST 서버는 다중 계츠으로 구성될 수 있으며, 로드 밸런싱, 암호화 계층등 추가해 구조상의 유연성을 둘 수 있고 PROXY, 게이트웨이 같은 네트워크 기반의 중간매체를 사용할 수 있게 합니다. 

정리하자면

클라이언트가 한정적 인터페이스인 URI로 중간 매체를 통해 서버로 보낼때 URL자체에는 상태를 갖지 않기 때문에 누구인지 기술해줘야 한다
서버는 여러 계층을 추가해 구조상의 유연성을 둘 수 있다.
캐시 사용 가능함

## REST API 디자인 가이드

REST API 설계 시 가장 중요한 항목은 다음 2가지와 같다  
1. URI는 정보의 자원을 표현해야 한다 
2. 자원에 대한 행위는 HTTP Method(GET,POST,PUT,DELETE)로 표현한다.

### REST API 중심 규칙

1. URI는 정보의 자원을 표현해야 한다. (리소스명은 동사보다는 명사를 사용)
    GET/members/delete/1

delete와 같은 행위에 대한 표현 안됨

2.자원에 대한 행위는 HTTP Method로 표현  
위를 수정한다면
     DELETE/members/1


C : create -> post  
R : Read -> get  
U : Update -> put / path  
D : Delete -> delete

HTTP-Method/자원...

### URI 설계 시 주의할 점

1. 슬래시 구분자(/)는 계층 관계를 나타내는 데 사용
2. URI 마지막 문자로 슬래시(/)를 포함하지 않는다
3. 하이픈(-)은 URI 가독성을 높이는데 사용
4. 밑줄(_)은 URI에 사용하지 않는다.
밑줄(_)은 글꼴에 따라 보기 어렵거나 문자가 가려질 수도 있다.
5. URI 경로에는 소문자가 적합하다.
6. 파일 확장자는 URI에 포함시키지 않는다  

>    
> down/I_M/up.jpg/

### 리소스 간의 관계를 표현하는 방법

REST 리소스 간에는 연관 관계가 있을 수 있고, 이런 경우 다음과 같은 표현 방법으로 사용한다.

> /리소스명/리소스ID/관계가 있는 다른 리소스명
> ex) GET : /users/{userid}/devices (일반적으로 소유 'has'의 관계)

만약에 관계명이 복잡하다면 명시적으로 표현 가능함

> GET: /users/{userid}/likes/devices (관계명이 애매하거나 구체적 표현이 필요할 때)

### 자원을 표현하는 Colletion과 Document

Colletion과 Document에 대해 알면 URI가 설계가 더 쉬워진다

**DOCUMENT**는 단순히 문서로 이해해도 되고, 한 객체라고 이해해도 된다.  
**Collection**은 문서들의 집합, 객체들의 집합이라고 생각하면 된다

>http:// restapi.example.com/sports/soccer  
위의 URI는 sports 라는 컬렉션과 soccer이라는 도큐먼트로 표현되고 있다

구체적인 예시는
>http://restapi.example.com/sports/soccer/players/13 

sports,players 컬렉션과 soccer,13을 의미하는 도큐먼트로 이뤄져있다  
중요한 점은 컬렉션은 복수로 사용하고 있다는 점 이다.  
직관적인 REST API를 위해서는 컬렉션과 도큐먼트를 사용할 때 단복수를 지켜주자

## HTTP 응답 상태 코드
잘 설계된 REST API는 URI만 잘 설계된 것이 아닌 그 리소스에 대한 응답을 잘 나타내주는 것 까지 포함이다.  

정확한 응답의 상태코드만으로도 많은 정보 전달이 가능하다

> 200 : 클라이언트의 요청을 정상적으로 수행함
> 201 : 클라이언트가 어떠한 리소스 생성을 요청, 해당 리소스가 성공적으로 생성됨(post작업)

>400 : 클라이언트의 요청이 부적절 할 경우 사용하는 응답 코드  
>401 : 클라이언트가 인증되지 않은 상태에서 보호된 리소스  
>(로그인 하지 않은 유저가 로그인 했을 때, 요청 가능한 리소스를 요청했을 때)  
>403 : 유저 인증상태와 관계 없이 응답하고 싶지 않은 리소스를 클라이언트가 요청했을때 사용하는 응답코드  
>(403보다는 400이나 404를 사용할 것을 권고,403 자체에 리소스가 존재한다는 뜻이기 때문에)  
>405 : 클라이언트가 요청한 리소스에서는 사용 불가능한 Method를 이용했을 경우

>301 : 클라이언트가 요청한 리소스에 대한 URI가 변경 되었을 때 사용하는 응답 코드  
>(응답 시 Loaction hearder에 변경된 URI를 적어 줘야 합니다.)

>500 : 서버에 문제가 있을 경우 사용하는 응답 코드







# DTO 학습하기

DTO란 무엇이고 왜 사용해야 하는가

## DTO란 무엇인가
DTO(Data Transfer Object,데이터 전송 객체)란 프로세스 간에 데이터를 전달하는 객체를 의미한다.  
